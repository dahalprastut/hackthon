
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Token</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.js"></script>
</head>
<body>
    <header>
        <div class="center">
         
            <h2>
                SIDDHARDHA BANK
                <span>Kumaripati Branch</span>
            </h2>

            <div class="data clearfix">
                <div class="left">
                    <strong class="oneCurrent">0</strong>
                    <small>WITHDRAW</small>
                </div>

                <div class="left">
                    <strong class="twoCurrent">0</strong>
                    <small>DEPOSIT</small>
                </div>

                <div class="left">
                    <strong class="threeCurrent">0</strong>
                    <small>MORTAGAGE</small>
                </div>
            </div>

            <div class="data down-data clearfix">
                <div class="left">
                    <strong class="oneLast">0</strong>
                    <small>WITHDRAW</small>
                </div>

                <div class="left">
                    <strong class="twoLast">0</strong>
                    <small>DEPOSIT</small>
                </div>

                <div class="left">
                    <strong class="threeLast">0</strong>
                    <small>MORTAGAGE</small>
                </div>
            </div>


            <div class="hidden-line-one">
                
            </div>
            <div class="hidden-line-two">
                
            </div>
        
        </div>

    </header>


    <div class="information">
        <button class="hiddens-map-button">Show Map</button>
        <h3>35
            <span>2019-05-01</span>
        </h3>
        <div class="info-absolute">
            <span>ET: <small class="etMortgage">45:00</small></span>
        </div>
        <div class="static-info">
            <small>*Note: Please reach before 10 mins as suggested time</small>
        </div>

    </div>

    <div class="hidden-map">
        <iframe src="https://www.google.com/maps/embed?pb=!1m26!1m12!1m3!1d3533.0344798409474!2d85.34417861467641!3d27.68532918306691!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m11!3e0!4m3!3m2!1d27.686925199999997!2d85.3434103!4m5!1s0x39eb198c8d6a0639%3A0x99903dada8289577!2sTinkune+Park%2C+Ring+Road%2C+Kathmandu+44600!3m2!1d27.685365899999997!2d85.3488678!5e0!3m2!1sen!2snp!4v1557609137955!5m2!1sen!2snp" width="380" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
    </div>


    <!-- <div class="absolute">
        <div class="center clearfix">
            <button class="absolute-left"> Get Token</button>
            <button class="absolute-right"> Book Token</button>
        </div>
    </div> -->

    <!-- dsafdsfdasfdafdasfdasfadsf -->


    <!-- <div class="hiddenBox">
        <h3>PLEASE SELECT THE SERVICE YOU WANT</h3>
        <div class="cardHidden">
            <div class="clearfix">

                <input type="radio" id="withdraw" name="asdf" value="withdraw">
                <label for="withdraw">
                    <strong>WITHDRAW</strong>
                    Current:  <span class="oneCurrent">32</span>Next  <span class="oneNextLast">0</span>
                </label>
            </div>
            <span>ET: <small class="etWithdraw">45:00</small></span>
        </div>
        <div class="cardHidden">
            <div class="clearfix">

                <input type="radio" id="deposite" name="asdf" value="deposite">
                <label for="deposite">
                    <strong>DEPOSIT</strong>
                    Current:  <span class="twoCurrent">32</span>Next  <span class="twoNextLast">0</span>
                </label>
            </div>
            <span>ET: <small class="etDeposit">45:00</small></span>
            
        </div>
        <div class="cardHidden">
            <div class="clearfix">

                <input type="radio" id="moratage" name="asdf" value="moratage">
                <label for="moratage">
                    <strong>MORTGAGE</strong>
                    Current:  <span class="threeCurrent">32</span>Next  <span class="threeNextLast">0</span>
                </label>
            </div>
            <span>ET: <small class="etMortgage">45:00</small></span>
            
        </div>

        <button class="bookSquare">BOOK IT</button>
    </div> -->

    <div class="card clearfix">
        <div class="left-card">
            <strong>
                COUNTER
                <small>1</small> 
            </strong>
            <span>WITHDRAW</span>

        </div>
        <div class="right-card">
            <div class="wrapper">

                <strong>CURRENT NUMBER: <span class="oneCurrent">0</span></strong>
                <strong>NEXT NUMBER: <span class="oneNext">0</span></strong>
            </div>
        </div>
    </div>
    <div class="card clearfix">
        <div class="left-card">
            <strong>
                COUNTER
                <small>2</small> 
            </strong>
            <span>DEPOSIT</span>

        </div>
        <div class="right-card">
            <div class="wrapper">

                <strong>CURRENT NUMBER: <span class="twoCurrent">0</span></strong>
                <strong>NEXT NUMBER: <span class="twoNext">0</span></strong>
            </div>
        </div>
    </div>
    <div class="card clearfix">
        <div class="left-card">
            <strong>
                COUNTER
                <small>3</small> 
            </strong>
            <span>MORTAGAGE</span>

        </div>
        <div class="right-card">
            <div class="wrapper">

                <strong>CURRENT NUMBER: <span class="threeCurrent">0</span></strong>
                <strong>NEXT NUMBER: <span class="threeNext">27</span></strong>
            </div>
        </div>
    </div>





    <script src="js/main.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.13.0/firebase.js"></script>
    <script>

    // Your web app's Firebase configuration

    var firebase
    config = {
        apiKey: "AIzaSyDtNHzhttQMWtv6Q6ncaNz-X3ulULEW0Xs",
        authDomain: "hackathon-af8bc.firebaseapp.com",
        databaseURL: "https://hackathon-af8bc.firebaseio.com",
        projectId: "hackathon-af8bc",
        storageBucket: "hackathon-af8bc.appspot.com",
        messagingSenderId: "966901725216",
        appId: "1:966901725216:web:1d04fb356c7a4f31"
    };
    firebase.initializeApp(config);

    let counter1 = firebase.database().ref('counter1');
    let counter2 = firebase.database().ref('counter2');
    let counter3 = firebase.database().ref('counter3');

    counter1.on('value',function(snapshot) {

        let snap = snapshot.val();
        let current_issue = snap.current_issue;
        let last_issue = snap.last_issue;
        let transaction_time= snap.transaction_time;
        let et = (last_issue - current_issue) * parseInt(transaction_time);

        $(".oneCurrent").text(current_issue);
        $(".oneNext").text(current_issue+1);
        $(".oneNextLast").text(last_issue+1);
        $(".oneLast").text(last_issue);
        $(".etWithdraw").text(time_convert(et));


    });

    counter2.on('value',function(snapshot) {

        let snap = snapshot.val();
        let current_issue = snap.current_issue;
        let last_issue = snap.last_issue;
        let transaction_time= snap.transaction_time;
        let et = (last_issue - current_issue) * parseInt(transaction_time);

        $(".twoCurrent").text(current_issue);
        $(".twoNext").text(current_issue+1);
        $(".twoNextLast").text(last_issue+1);
        $(".twoLast").text(last_issue);
        $(".etDeposit").text(time_convert(et));



    });

    counter3.on('value',function(snapshot) {

        let snap = snapshot.val();
        let current_issue = snap.current_issue;
        let last_issue = snap.last_issue;
        let transaction_time= snap.transaction_time;
        let et = (last_issue - current_issue) * parseInt(transaction_time);

        $(".threeCurrent").text(current_issue);
        $(".threeNext").text(current_issue+1);
        $(".threeNextLast").text(last_issue+1);
        $(".threeLast").text(last_issue);
        $(".etMortgage").text(time_convert(et));

    });

    function time_convert(num)
    {
        let travelTime = moment().add(num, 'minutes').format('hh:mm A');
        let hours = Math.floor(num / 60);
        let minutes = num % 60;
        return `${hours} Hour : ${minutes} Minute (${travelTime})`;
    }



    document.querySelector('.hiddens-map-button').addEventListener('click', ()=>{
        document.querySelector('.information').style.display="none";
        document.querySelector('.hidden-map').style.display="block";
    });


    document.querySelector('.threeLast').addEventListener('click',()=>{
        document.querySelector('.information').style.display="block";
        document.querySelector('.hidden-map').style.display="none";
    });
    </script>
</body>
</html>